项目结构其实很简单，主要是`package.json`以及`extension.ts`这个插件入口文件：

![image-20221012191704129](https://qn.huat.xyz/mac/20221012191704.png)

> 脚手架创建出来的extension.ts，未修改过。



## `package.json`关键部分

```json
{
  "activationEvents": [
        "onCommand:vscode-test.helloWorld"
	],
	"main": "./out/extension.js",
	"contributes": {
		"commands": [
			{
				"command": "vscode-test.helloWorld",
				"title": "Hello World"
			}
		]
	},
}
```



- `main`定义了整个插件入口
- `onCommand`: 我们在`contributes.commands`里面注册了一个名为`vscode-test.helloWorld`的命令，并在`src/extension.ts`中去实现了它（弹出一个`Hello World`的提示）；但是仅仅这样还不够，命令虽然定义了，但是vscode还不知道啥时候去执行它，还需要在`activationEvents`添加上`onCommand:vscode-test.helloWorld`用来告诉vscode，当用户执行了这个命令操作时去执行我们写的代码
- 除了`onCommand`之外，还有`onView`、`onUri`、`onLanguage`等等，具体我们后面会详细讲到。





## `extension.ts`

```ts
import * as vscode from 'vscode';

/**
 * @description: 插件被激活时触发，所有代码总入口
 * @param {vscode} context 插件上下文
 * @return {*}
 */
export function activate(context: vscode.ExtensionContext) {
	
	console.log('Congratulations, your extension "vscode-test" is now active!');

	let disposable = vscode.commands.registerCommand('vscode-test.helloWorld', () => {
		vscode.window.showInformationMessage('Hello World from vscode-test!');
	});

	context.subscriptions.push(disposable);
}


/**
 * @description: 插件被释放时触发
 * @return {*}
 */
export function deactivate() {
	console.log('Hi, your extension "vscode-test" is deactivated!');
}
```





## package.json详解